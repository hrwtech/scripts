_https://forum.omz-software.com/topic/3929/new-url-scheme_

[install stash](pythonista://?exec=import%20os%0Aimport%20shutil%0Aimport%20sys%0Aimport%20requests%0Aimport%20zipfile%0A%0Atry%3A%0A%20%20%20%20branch%20%3D%20locals%28%29%5B%27_br%27%5D%0Aexcept%20KeyError%3A%0A%20%20%20%20branch%20%3D%20%27master%27%0Atry%3A%0A%20%20%20%20repo%20%3D%20locals%28%29%5B%27_owner%27%5D%0Aexcept%3A%0A%20%20%20%20repo%20%3D%20%27ywangd%27%0A%0A_IS_UPDATE%20%3D%20%27_IS_UPDATE%27%20in%20locals%28%29%0A%0ATMPDIR%20%3D%20os.environ.get%28%27TMPDIR%27%2C%20os.environ.get%28%27TMP%27%29%29%0AURL_ZIPFILE%20%3D%20%27https%3A//github.com/%7B%7D/stash/archive/%7B%7D.zip%27.format%28repo%2C%20branch%29%0ATEMP_ZIPFILE%20%3D%20os.path.join%28TMPDIR%2C%20%27%7B%7D.zip%27.format%28branch%29%29%0ATEMP_PTI%20%3D%20os.path.join%28TMPDIR%2C%20%27ptinstaller.py%27%29%0AURL_PTI%20%3D%20%27https%3A//raw.githubusercontent.com/ywangd/pythonista-tools-installer/master/ptinstaller.py%27%0A%0Aprint%28%27Downloading%20%7B%7D%20...%27.format%28URL_ZIPFILE%29%29%0A%0Atry%3A%0A%20%20%20%20r%20%3D%20requests.get%28URL_ZIPFILE%2C%20stream%3DTrue%29%0A%20%20%20%20file_size%20%3D%20r.headers.get%28%27Content-Length%27%29%0A%20%20%20%20if%20file_size%20is%20not%20None%3A%0A%20%20%20%20%20%20%20%20file_size%20%3D%20int%28file_size%29%0A%0A%20%20%20%20with%20open%28TEMP_ZIPFILE%2C%20%27wb%27%29%20as%20outs%3A%0A%20%20%20%20%20%20%20%20block_sz%20%3D%208192%0A%20%20%20%20%20%20%20%20for%20chunk%20in%20r.iter_content%28block_sz%29%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20outs.write%28chunk%29%0A%0A%20%20%20%20%23%20Get%20Pythonista%20Tools%20Installer%0A%20%20%20%20r%20%3D%20requests.get%28URL_PTI%29%0A%20%20%20%20with%20open%28TEMP_PTI%2C%20%27w%27%29%20as%20outs%3A%0A%20%20%20%20%20%20%20%20outs.write%28r.text%29%0A%0Aexcept%20Exception%20as%20e%3A%0A%20%20%20%20sys.stderr.write%28%27%7B%7D%5Cn%27.format%28e%29%29%0A%20%20%20%20sys.stderr.write%28%27Download%20failed%21%20Please%20make%20sure%20internet%20connection%20is%20available.%5Cn%27%29%0A%20%20%20%20sys.exit%281%29%0A%0ABASE_DIR%20%3D%20os.path.expanduser%28%27%7E%27%29%0ATARGET_DIR%20%3D%20os.path.join%28BASE_DIR%2C%20%27Documents/site-packages/stash%27%29%0Aif%20not%20os.path.exists%28TARGET_DIR%29%3A%0A%20%20%20%20os.makedirs%28TARGET_DIR%29%0Aprint%28%27Unzipping%20into%20%25s%20...%27%20%25%20TARGET_DIR%29%0A%0Awith%20open%28TEMP_ZIPFILE%2C%20%27rb%27%29%20as%20ins%3A%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20zipfp%20%3D%20zipfile.ZipFile%28ins%29%0A%20%20%20%20%20%20%20%20for%20name%20in%20zipfp.namelist%28%29%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20data%20%3D%20zipfp.read%28name%29%0A%20%20%20%20%20%20%20%20%20%20%20%20name%20%3D%20name.split%28%27stash-%25s/%27%20%25%20branch%2C%201%29%5B-1%5D%20%20%23%20strip%20the%20top-level%20directory%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20name%20%3D%3D%20%27%27%3A%20%20%23%20skip%20top-level%20directory%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20continue%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20fname%20%3D%20os.path.join%28TARGET_DIR%2C%20name%29%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20fname.endswith%28%27/%27%29%3A%20%20%23%20A%20directory%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20not%20os.path.exists%28fname%29%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20os.makedirs%28fname%29%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fp%20%3D%20open%28fname%2C%20%27wb%27%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fp.write%28data%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20finally%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20fp.close%28%29%0A%20%20%20%20except%3A%0A%20%20%20%20%20%20%20%20sys.stderr.write%28%27The%20zip%20file%20is%20corrupted.%20Pleases%20re-run%20the%20script.%5Cn%27%29%0A%20%20%20%20%20%20%20%20sys.exit%281%29%0A%0Aprint%28%27Preparing%20the%20folder%20structure%20...%27%29%0A%23%20Move%20ptinstaller.py%20to%20bin%0Ashutil.move%28TEMP_PTI%2C%20os.path.join%28TARGET_DIR%2C%20%27bin/ptinstaller.py%27%29%29%0A%0A%23%20Move%20launch%20script%20to%20Documents%20for%20easy%20access%0Ashutil.move%28os.path.join%28TARGET_DIR%2C%20%27launch_stash.py%27%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20os.path.join%28BASE_DIR%2C%20%27Documents/launch_stash.py%27%29%29%0A%0A%23%20Remove%20setup%20files%20and%20possible%20legacy%20files%0Atry%3A%0A%20%20%20%20os.remove%28TEMP_ZIPFILE%29%0A%0A%20%20%20%20shutil.rmtree%28os.path.join%28TARGET_DIR%2C%20%27tests%27%29%29%0A%0A%20%20%20%20unwanted_files%20%3D%20%5B%27getstash.py%27%2C%20%27run_tests.py%27%2C%20%27testing.py%27%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27dummyui.py%27%2C%20%27dummyconsole.py%27%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%27bin/pcsm.py%27%2C%20%27bin/bh.py%27%2C%20%27bin/pythonista.py%27%2C%20%27bin/cls.py%27%5D%0A%0A%20%20%20%20for%20fname%20in%20unwanted_files%3A%0A%20%20%20%20%20%20%20%20os.remove%28os.path.join%28TARGET_DIR%2C%20fname%29%29%0Aexcept%3A%0A%20%20%20%20pass%0A%0Aif%20not%20_IS_UPDATE%3A%0A%20%20%20%20print%28%27Installation%20completed.%27%29%0A%20%20%20%20print%28%27Please%20Restart%20Pythonista%20and%20run%20launch_stash.py%20under%20the%20Home%20directory%20to%20start%20StaSh.%27%29%0A)

[wrench action: copy file as executable url](pythonista://exec?=import%20sys%2Cclipboard%2Cconsole%0Afrom%20urllib.parse%20import%20quote%0A%0Awith%20open%28sys.argv%5B1%5D%29%20as%20f%3A%0A%09s%3D%27%5BLINK%5D%28pythonista%3A//exec%3F%3D%7B%7D%29%27.format%28quote%28f.read%28%29%29%29%0A%09clipboard.set%28s%29%0Aconsole.hud_alert%28%27link%20copied%27%29%0A)
